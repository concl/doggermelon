[gd_scene load_steps=16 format=3 uid="uid://dx6bicmwfxw14"]

[ext_resource type="Script" uid="uid://d27f6voftj48k" path="res://scripts/main.gd" id="1_0wfyh"]
[ext_resource type="Texture2D" uid="uid://bjrj34u2ybwyd" path="res://assets/background_placeholder.png" id="2_o6xl0"]
[ext_resource type="Texture2D" uid="uid://su76g6rv7t6s" path="res://assets/Shelf.png" id="2_tbgi4"]
[ext_resource type="Texture2D" uid="uid://60gfv8j7uh2f" path="res://assets/Bucket.png" id="3_jyhfs"]
[ext_resource type="Texture2D" uid="uid://wr130120yclm" path="res://icon.svg" id="4_jyhfs"]
[ext_resource type="Script" uid="uid://dsd2hbvx0jvh2" path="res://scripts/gatcha.gd" id="5_tbgi4"]
[ext_resource type="Script" uid="uid://d0vn0jkk7awv7" path="res://scripts/chest.gd" id="6_tefeu"]

[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_jyhfs"]

[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_tbgi4"]

[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_tefeu"]

[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_o6xl0"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_64coc"]
sky_horizon_color = Color(1.5513475, 1.5685976, 1.5925975, 1)
ground_bottom_color = Color(1, 1, 1, 1)
ground_horizon_color = Color(1.5513475, 1.5685976, 1.5925975, 1)

[sub_resource type="Sky" id="Sky_aqlsu"]
sky_material = SubResource("ProceduralSkyMaterial_64coc")

[sub_resource type="Environment" id="Environment_al0gs"]
background_mode = 2
sky = SubResource("Sky_aqlsu")
tonemap_mode = 2

[sub_resource type="BoxMesh" id="BoxMesh_tefeu"]

[node name="Main" type="Node2D"]
script = ExtResource("1_0wfyh")

[node name="Game" type="CanvasLayer" parent="."]

[node name="background" type="TextureRect" parent="Game"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 1.0
offset_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
texture = ExtResource("2_o6xl0")

[node name="Shelf" type="StaticBody2D" parent="Game"]
position = Vector2(243, 324)
scale = Vector2(0.5, 0.5)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Game/Shelf"]
position = Vector2(-3, -171)
polygon = PackedVector2Array(-355, -61, 357, -60, 355, -39, -355, -37)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="Game/Shelf"]
position = Vector2(-7.403701, -49.25007)
polygon = PackedVector2Array(-347.5963, -11.749931, 364.4037, -10.749931, 362.4037, 10.250069, -347.5963, 12.250069)

[node name="CollisionPolygon2D3" type="CollisionPolygon2D" parent="Game/Shelf"]
position = Vector2(-11, 120)
polygon = PackedVector2Array(-347.5963, -11.749931, 364.4037, -10.749931, 362.4037, 10.250069, -347.5963, 12.250069)

[node name="CollisionPolygon2D4" type="CollisionPolygon2D" parent="Game/Shelf"]
position = Vector2(-6, 288)
polygon = PackedVector2Array(-347.5963, -11.749931, 364.4037, -10.749931, 362.4037, 10.250069, -347.5963, 12.250069)

[node name="Sprite2D" type="Sprite2D" parent="Game/Shelf"]
texture = ExtResource("2_tbgi4")

[node name="Bucket" type="StaticBody2D" parent="Game"]
position = Vector2(847, 324)
scale = Vector2(0.5, 0.5)

[node name="Sprite2D" type="Sprite2D" parent="Game/Bucket"]
texture = ExtResource("3_jyhfs")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Game/Bucket"]
position = Vector2(12.237995, 37.791706)
scale = Vector2(2.8475933, 2.3793857)
polygon = PackedVector2Array(-171.45636, -160.4581, -168.64697, -8.317993, -154.60004, 132.89493, 144.59998, 133.7355, 155.1352, 74.89676, 162.15869, -160.4581, 155.1352, -160.4581, 153.02814, -67.15671, 148.81409, 58.085724, 138.27887, 126.1705, -148.2789, 126.1705, -156.70706, 57.245148, -162.32587, -70.51892, -163.0282, -160.4581)

[node name="Camera2D" type="Camera2D" parent="Game"]
position = Vector2(576, 324)

[node name="UI" type="Control" parent="Game"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="VBoxContainer" type="VBoxContainer" parent="Game/UI"]
layout_mode = 0
offset_right = 766.0
offset_bottom = 50.0

[node name="Score" type="Label" parent="Game/UI/VBoxContainer"]
layout_mode = 2

[node name="XPBox" type="HBoxContainer" parent="Game/UI/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="XPLabel" type="Label" parent="Game/UI/VBoxContainer/XPBox"]
layout_mode = 2
text = "XP: "

[node name="XPAmount" type="Label" parent="Game/UI/VBoxContainer/XPBox"]
layout_mode = 2

[node name="XPBar" type="TextureProgressBar" parent="Game/UI/VBoxContainer/XPBox"]
layout_mode = 2
size_flags_horizontal = 3
nine_patch_stretch = true
texture_progress = SubResource("PlaceholderTexture2D_jyhfs")

[node name="debug_end_game" type="Button" parent="Game/UI"]
layout_mode = 0
offset_left = 8.0
offset_top = 608.0
offset_right = 92.0
offset_bottom = 639.0
text = "eng game
"

[node name="debug_merge_all" type="Button" parent="Game/UI"]
layout_mode = 0
offset_left = 117.0
offset_top = 603.0
offset_right = 201.0
offset_bottom = 634.0
text = "MERGE ALL"

[node name="HBoxContainer" type="HBoxContainer" parent="Game/UI"]
layout_mode = 0
offset_left = 1069.0
offset_top = 18.0
offset_right = 1109.0
offset_bottom = 58.0

[node name="ChestButton" type="TextureButton" parent="Game/UI/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
texture_normal = ExtResource("4_jyhfs")
texture_pressed = ExtResource("4_jyhfs")
texture_hover = SubResource("PlaceholderTexture2D_tbgi4")
texture_disabled = SubResource("PlaceholderTexture2D_tefeu")
texture_focused = SubResource("PlaceholderTexture2D_o6xl0")
ignore_texture_size = true
stretch_mode = 4

[node name="ChestCount" type="Label" parent="Game/UI/HBoxContainer"]
layout_mode = 2

[node name="test_gamestage" type="Label" parent="Game"]
offset_right = 40.0
offset_bottom = 23.0

[node name="Gatcha" type="CanvasLayer" parent="."]
visible = false
script = ExtResource("5_tbgi4")

[node name="CanvasLayer" type="CanvasLayer" parent="Gatcha"]

[node name="Node2D" type="Node2D" parent="Gatcha/CanvasLayer"]
position = Vector2(576, 324)

[node name="UI" type="Control" parent="Gatcha/CanvasLayer"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Button" type="Button" parent="Gatcha/CanvasLayer/UI"]
layout_mode = 0
offset_right = 8.0
offset_bottom = 8.0
text = "back"

[node name="CanvasLayer2" type="CanvasLayer" parent="Gatcha"]

[node name="Chest" type="Node3D" parent="Gatcha/CanvasLayer2"]
script = ExtResource("6_tefeu")

[node name="Camera3D" type="Camera3D" parent="Gatcha/CanvasLayer2/Chest"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.9245683)

[node name="WorldEnvironment" type="WorldEnvironment" parent="Gatcha/CanvasLayer2/Chest"]
environment = SubResource("Environment_al0gs")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Gatcha/CanvasLayer2/Chest"]
mesh = SubResource("BoxMesh_tefeu")

[connection signal="value_changed" from="Game/UI/VBoxContainer/XPBox/XPBar" to="." method="_on_xp_bar_value_changed"]
[connection signal="pressed" from="Game/UI/debug_end_game" to="." method="_on_debug_end_game_pressed"]
[connection signal="pressed" from="Game/UI/debug_merge_all" to="." method="_on_debug_merge_all_pressed"]
[connection signal="pressed" from="Game/UI/HBoxContainer/ChestButton" to="." method="_on_chest_button_pressed"]
[connection signal="pressed" from="Gatcha/CanvasLayer/UI/Button" to="." method="_on_button_pressed"]
